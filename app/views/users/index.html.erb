<script type="text/javascript" src="https://secure.skypeassets.com/i/scom/js/skype-uri.js"></script>

<h1>Listing all Users</h1>

<html>
    <body>
        <div id="main-container" class="container">
            <table>
              <tr>
                <th>Name</th>
                <th>SkypeID</th>
              </tr>

              <% @users.each do |user| %>
                <tr>
                  <td class="col-xs-3"><%= user.name %></td>
                  <td class="col-xs-9"><%= user.skypeid %></td>
                  <td><%= link_to 'Show', user_path(user) %></td>
                  <td><%= link_to 'Call', call_user_path(user) %></td>
                  <td> <div id= <%= "SkypeButton_Call_"+user.name %>>
                  <script type="text/javascript">
                    Skype.ui({
                             "name": "call",
                             "element": "<%= "SkypeButton_Call_"+user.name %>",
                             "participants": ["<%= user.skypeid %>"]
                            });
                  </script>
                </tr>
              <% end %>
            </table>
        </div>
    </body>
</html>